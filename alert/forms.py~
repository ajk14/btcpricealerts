from django.db import models
from django.forms import ModelForm, FloatField, EmailField, CharField, PasswordInput, ValidationError, Form, ChoiceField, RadioSelect
from django.contrib.localflavor.us.forms import USPhoneNumberField

class PhoneForm(Form):
    phone = USPhoneNumberField()

class AlertForm(Form):
    delivery_type = ChoiceField(choices=settings.DELIVERY_CHOICES, widget=RadioSelect())
    alert_when = ChoiceField(choices=settings.ALERT_CHOICES, widget=RadioSelect())
    threshold = FloatField()

class RegistrationForm(ModelForm):
    confirm_password = CharField(widget=PasswordInput())
    class Meta:
        model = AUser
        fields = ("email", "password", "confirm_password")
        widgets = {
            'password': PasswordInput(),
        }


    def clean(self):
        super(RegistrationForm, self).clean()
        if self.cleaned_data['confirm_password']!=self.cleaned_data['password']:
            raise ValidationError("Passwords don't match")
        return self.cleaned_data
